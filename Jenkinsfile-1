pipeline {

  environment {
    dockerimagename = "java-web-app:latest"
   // dockerImage = ""
  }

  agent any

  stages {

    stage('Build image') {
      steps{
        sh 'sudo docker build -t dockerimagename https://github.com/test9877/java-web-app.git'
      }
    }
  
    stage('Scan') {
      steps {
        sh 'sudo trivy image test9877/java-web-app:latest'
      }
    }
  }
}

